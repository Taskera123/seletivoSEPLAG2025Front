import{u as k,r as o,b as j,j as a,L as v,I as N,a as w,c as E,d as p}from"./index-DPBayik9.js";function I({id:l,nome:c,foto:t,situacao:d,dataDesaparecimento:g,paginaAtual:x}){const u=k();return o.useEffect(()=>{l&&j(l).then(n=>{}).catch(n=>{console.error("Erro ao buscar dados:",n)})},[l]),a.jsx(v,{to:`/detalhes/${l}`,state:{backgroundLocation:u,paginaAtual:x},children:a.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden hover:shadow-lg transition cursor-pointer h-[400px] flex flex-col",children:[a.jsx(N,{src:t,alt:c,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),a.jsxs("div",{className:"p-4 flex-1 flex flex-col justify-between items-center text-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:c}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Desaparecido desde:"," ",new Date(g).toLocaleDateString("pt-BR")]})]}),a.jsx("span",{className:`inline-block mt-5 px-5 py-3 text-xl font-semibold rounded-full ${d==="DESAPARECIDO"?"bg-red-200 text-red-800 dark:bg-red-800 dark:text-white":"bg-green-200 text-green-800 dark:bg-green-800 dark:text-white"}`,children:d})]})]})})}function C(){const[l]=w(),c=Number(l.get("pagina"))||1,[t,d]=o.useState(c-1),[g,x]=o.useState(0),[u,n]=o.useState(0),m=10,[h,b]=o.useState([]),{mostrarFiltros:y,alternarFiltros:f}=E(),[s,i]=o.useState({nome:"",sexo:"",faixaIdadeInicial:0,faixaIdadeFinal:0,status:"DESAPARECIDO"});return o.useEffect(()=>{(async()=>{try{const e=await p(t,s);b(e.data.content||[]),x(e.data.totalPages||0),n(e.data.totalElements||0)}catch(e){console.error("Erro ao carregar desaparecidos:",e)}})()},[t,JSON.stringify(s)]),o.useEffect(()=>{const r=async()=>{try{const e=await p(0,s);b(e.data.content||[]),x(e.data.totalPages||0),n(e.data.totalElements||0)}catch(e){console.error("Erro ao carregar desaparecidos:",e)}};d(0),r()},[JSON.stringify(s)]),a.jsxs("div",{className:"p-4 max-w-7xl mx-auto",children:[y&&a.jsx("div",{className:"fixed inset-0 z-40 flex items-start justify-center pt-20 backdrop-blur-sm bg-black/30",children:a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded shadow-lg w-full max-w-2xl p-6 relative",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Filtros"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx("input",{type:"text",placeholder:"Nome",className:"w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded p-2",value:s.nome,onChange:r=>i(e=>({...e,nome:r.target.value}))}),a.jsxs("select",{className:"w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded p-2",value:s.sexo,onChange:r=>i(e=>({...e,sexo:r.target.value})),children:[a.jsx("option",{value:"",children:"Sexo"}),a.jsx("option",{value:"MASCULINO",children:"Masculino"}),a.jsx("option",{value:"FEMININO",children:"Feminino"})]}),a.jsx("input",{type:"number",placeholder:"Idade mínima",className:"w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded p-2",value:s.faixaIdadeInicial,onChange:r=>i(e=>({...e,idadeMin:r.target.value}))}),a.jsx("input",{type:"number",placeholder:"Idade máxima",className:"w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded p-2",value:s.faixaIdadeFinal,onChange:r=>i(e=>({...e,idadeMax:r.target.value}))}),a.jsxs("select",{className:"w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded p-2",value:s.status,onChange:r=>i(e=>({...e,status:r.target.value})),children:[a.jsx("option",{value:"LOCALIZADO",children:"LOCALIZADO"}),a.jsx("option",{value:"DESAPARECIDO",children:"DESAPARECIDO"})]})]}),a.jsxs("div",{className:"mt-6 flex gap-2 flex-wrap",children:[a.jsx("button",{onClick:()=>{i({nome:"",sexo:"",faixaIdadeInicial:0,faixaIdadeFinal:0,status:"DESAPARECIDO"}),d(0)},className:"bg-gray-200 dark:bg-gray-800 rounded hover:bg-gray-400 dark:hover:bg-gray-400 disabled:opacity-50 dark:text-white px-4 py-2 transition",children:"Limpar Filtros"}),a.jsx("button",{onClick:f,className:"ml-auto text-sm text-gray-500 hover:text-red-500",children:"Fechar Filtros ✕"})]})]})}),h.length===0?a.jsx("div",{className:"col-span-full text-center text-gray-500",children:"Carregando dados..."}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:h.map(r=>{var e;return a.jsx(I,{id:r.id,nome:r.nome,foto:r.urlFoto,situacao:s.status,dataDesaparecimento:((e=r.ultimaOcorrencia)==null?void 0:e.dtDesaparecimento)??"",paginaAtual:t+1},r.id)})}),a.jsxs("div",{className:"mt-6 flex flex-col items-center gap-2",children:[a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{className:"px-4 py-2 bg-gray-200 dark:bg-gray-800 rounded hover:bg-gray-400 dark:hover:bg-gray-400 disabled:opacity-50 dark:text-white",disabled:t===0,onClick:()=>d(r=>r-1),children:"Anterior"}),a.jsxs("span",{className:"px-4 py-2 font-semibold text-gray-800 dark:text-white",children:["Página ",t+1," de ",g]}),a.jsx("button",{className:"px-4 py-2 bg-gray-200 dark:bg-gray-800 rounded hover:bg-gray-400 dark:hover:bg-gray-400 disabled:opacity-50 dark:text-white",disabled:t+1>=g,onClick:()=>d(r=>r+1),children:"Próxima"})]}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Exibindo ",t*m+1," a ",Math.min((t+1)*m,u)," de ",u," registros"]})]})]})}export{C as default};
